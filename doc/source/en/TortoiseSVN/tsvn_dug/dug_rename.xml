<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 SYSTEM "../../../dtd/dblite.dtd">
<sect1 id="tsvn-DUG-rename">
	<title>Deleting, Renaming And Moving</title>
	<indexterm>
		<primary>delete</primary>
	</indexterm>
	<indexterm>
		<primary>remove</primary>
	</indexterm>
	<indexterm>
		<primary>rename</primary>
	</indexterm>
	<indexterm>
		<primary>move</primary>
	</indexterm>
	<?dbhh topicname="HIDD_RENAME"?>
	<para>
		Unlike CVS, Subversion allows renaming and moving of files and
		folders. So there are menu entries for delete and rename
		in the TortoiseSVN submenu.
		<figure id="tsvn-DUG-renaming-dia-1">
			<title>Explorer context menu for versioned files</title>
			<graphic fileref="../images/ContextMenuFileControl.png"/>
		</figure>
	</para>
	<para>
		If you delete a file/directory using TSVN, the file is
		removed from your working copy and marked for deletion.
		The file's parent folder shows a "deleted" icon overlay.
		You can always get the file back, if you call
		<menuchoice>
			<guimenu>TortoiseSVN</guimenu>
			<guimenuitem>Revert</guimenuitem>
		</menuchoice>
		on the parent folder.
	</para>
	<para>
		If you want to move files inside a working copy,
		use the drag-and-drop handler again:
		<orderedlist>
			<listitem>
				<para>
					select the files or directories you want to move
				</para>
			</listitem>
			<listitem>
				<para>
					<action>right-drag</action> them to the
					new location inside the working copy
				</para>
			</listitem>
			<listitem>
				<para>
					release the right mouse button
				</para>
			</listitem>
			<listitem>
				<para>
					in the popup menu select
					<menuchoice>
						<guimenu>Context Menu</guimenu>
						<guimenuitem>Move files in Subversion to here</guimenuitem>
					</menuchoice>
				</para>
			</listitem>
		</orderedlist>
	</para>
	<caution>
		<title>Do Not SVN Move Externals</title>
		<para>
			You should <emphasis>not</emphasis> use the TortoiseSVN
			<guilabel>Move</guilabel> or <guilabel>Rename</guilabel>
			commands on a folder which has been created using
			<literal>svn:externals</literal>.
			This action would cause the external item to be deleted from
			its parent repository, probably upsetting many other people.
			If you need to move an externals folder you should use an
			ordinary shell move, then adjust the
			<literal>svn:externals</literal> properties of the source
			and destination parent folders.
		</para>
	</caution>
	<para>
		If a <emphasis>file</emphasis> is deleted via the explorer instead 
		of using the TortoiseSVN context menu, the commit
		dialog shows those files and lets you remove them from
		version control too before the commit. However, if you update
		your working copy, Subversion will spot the missing file and
		replace it with the latest version from the repository.
		If you need to delete a version-controlled file, always use
		<menuchoice>
			<guimenu>TortoiseSVN</guimenu>
			<guimenuitem>Delete</guimenuitem>
		</menuchoice> so that Subversion doesn't have to guess what
		you really want to do.
	</para>
	<para>
		If a <emphasis>folder</emphasis> is deleted via the explorer instead 
		of using the TortoiseSVN context menu,  your working copy will be broken
		and you will be unable to commit. If you update your working copy,
		Subversion will replace the missing folder with the latest version
		from the repository and you can then delete it the correct way
		using
		<menuchoice>
			<guimenu>TortoiseSVN</guimenu>
			<guimenuitem>Delete</guimenuitem>
		</menuchoice>.
	</para>
	<caution>
		<title>Commit the parent folder</title>
		<para>
			Since renames and moves are done as a delete followed by an
			add you must commit the parent folder of the renamed/moved
			file so that the deleted part of the rename/move will
			show up in the commit dialog. If you don't commit the removed
			part of the rename/move, it will stay behind in the repository
			and an update of your coworkers won't remove the old file.
			i.e. they will have <emphasis>both</emphasis> the old and the
			new copies.
		</para>
		<para>
			You <emphasis>must</emphasis> commit a folder rename before
			changing any of the files inside the folder, otherwise your
			working copy can get really messed up.
		</para>
	</caution>
	<tip>
		<title>Getting a deleted file or folder back</title>
		<para>
			If you have deleted a file or a folder and already committed
			that delete operation to the repository, then a normal 
			<menuchoice>
				<guimenu>TortoiseSVN</guimenu>
				<guimenuitem>Revert</guimenuitem>
			</menuchoice>
			can't bring it back anymore. But the file or folder is not
			lost at all. If you know the revision the file or folder got
			deleted (if you don't, use the log dialog to find out) open
			the repository browser and switch to that revision. Then select
			the file or folder you deleted, right-click and select
			<menuchoice>
				<guimenu>Context Menu</guimenu>
				<guimenuitem>Copy to...</guimenuitem>
			</menuchoice>
			as the target for that copy operation select the path to your
			working copy.
		</para>
	</tip>
</sect1>

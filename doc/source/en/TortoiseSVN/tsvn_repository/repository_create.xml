<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 SYSTEM "../../../dtd/dblite.dtd">
<sect1 id="tsvn-repository-create">
	<title>Repository Creation</title>
	<indexterm>
		<primary>create repository</primary>
	</indexterm>
	<para>
		You can create a repository with the FSFS backend or with the
		older Berkeley Database (BDB) format. The FSFS format
		is generally faster and easier to administer, and it works on
		network shares and Windows 98 without problems. The BDB format
		was once considered more stable simply because it has been in use
		for longer, but since FSFS has now been in use in the field for
		several years, that argument is now rather weak.
		Read
		<ulink url="http://svnbook.red-bean.com/en/1.4/svn.reposadmin.planning.html#svn.reposadmin.basics.backends">
			<citetitle>Choosing a Data Store</citetitle>
		</ulink>
		in the Subversion book for more information.
	</para>
	<sect2 id="tsvn-repository-create-commandline">
		<title>Creating a Repository with the Command Line Client</title>
		<indexterm>
			<primary>Create</primary>
			<secondary>Command Line Client</secondary>
		</indexterm>
		<orderedlist>
			<listitem>
				<para>
					Create an empty folder with the name SVN
					(e.g. <filename>D:\SVN\</filename>),
					which is used as root for all your repositories.
				</para>
			</listitem>
			<listitem>
				<para>
					Create another folder
					<filename>MyNewRepository</filename> inside
					<filename>D:\SVN\</filename>.
				</para>
			</listitem>
			<listitem>
				<para>
					Open the command prompt (or DOS-Box), change into 
					<filename>D:\SVN\</filename> and type
<screen>
svnadmin create --fs-type bdb MyNewRepository
</screen>
or
<screen>
svnadmin create --fs-type fsfs MyNewRepository
</screen>
				</para>
			</listitem>
		</orderedlist>
		<para>
			Now you've got a new repository located at
			<filename>D:\SVN\MyNewRepository</filename>.
		</para>
	</sect2>
	<!-- ================================================================= -->
	<sect2 id="tsvn-repository-create-tortoisesvn">
		<title>Creating The Repository With TortoiseSVN</title>
		<indexterm>
			<primary>Create</primary>
			<secondary>TortoiseSVN</secondary>
		</indexterm>
		<?dbhh topicname="HIDD_REPOCREATE"?>
		<figure id="tsvn-serversetup-local-dia-1">
			<title>The TortoiseSVN menu for unversioned folders</title>
			<graphic fileref="../images/ContextMenuDirNoControl.png"/>
		</figure>
		<orderedlist>
			<listitem>
				<para>
					Open the windows explorer
				</para>
			</listitem>
			<listitem>
				<para>
					Create a new folder and name it e.g.
					<filename>SVNRepository</filename>
				</para>
			</listitem>
			<listitem>
				<para>
					<action>Right-click</action> on the newly created folder
					and select
					<menuchoice>
						<guimenu>TortoiseSVN</guimenu>
						<guimenuitem>Create Repository here...</guimenuitem>
					</menuchoice>.
				</para>
				<para>
					A repository is then created inside the new folder.
					<emphasis>Don't edit those files yourself!!!</emphasis>.
					If you get any errors make sure that the folder is empty
					and not write protected.
				</para>
			</listitem>
		</orderedlist>
		<tip>
			<para>
				TortoiseSVN no longer offers the option to create BDB repositories,
				although you can still use the command line client to create them.
				FSFS repositories are generally easier for you to maintain, and also
				makes it easier for us to maintain TortoiseSVN due to compatibility
				issues between the different BDB versions.
			</para>
			<para>
				Future versions of TortoiseSVN will not support
				<literal>file:///</literal> access to BDB repositories due to these
				compatibility issues, although it will of course always support
				this repository format when accessed via a server through the
				<literal>svn://</literal>,
				<literal>http://</literal> or
				<literal>https://</literal> protocols.
				For this reason, we strongly recommend that any new repository
				which must be accessed using <literal>file:///</literal>
				protocol is created as FSFS.
			</para>
			<para>
				Of course we also recommend that you don't use <literal>file:///</literal>
				access at all, apart from local testing purposes. Using a server is
				more secure and more reliable for all but single-developer use.
			</para>
		</tip>
	</sect2>
	<!-- ================================================================= -->
	<sect2 id="tsvn-repository-local-access">
		<title>Local Access to the Repository</title>
		<indexterm>
			<primary>Access</primary>
		</indexterm>
		<indexterm>
			<primary>UNC paths</primary>
		</indexterm>
		<para>
			To access your local repository you need the path to that folder.
			Just remember that Subversion expects all repository paths in the form
			<systemitem class="url">file:///C:/SVNRepository/</systemitem>.
			Note the use of forward slashes throughout.
		</para>
		<para>
			To access a repository located on a network share you can either
			use drive mapping, or you can use the UNC path. For UNC paths,
			the form is
			<systemitem class="url">file://ServerName/path/to/repos/</systemitem>.
			Note that there are only 2 leading slashes here.
		</para>
		<para>
			Prior to SVN 1.2, UNC paths had to be given in the more obscure form
			<systemitem class="url">file:///\ServerName/path/to/repos</systemitem>.
			This form is still supported, but not recommended.
		</para>
	</sect2>
	<warning>
		<para>
			Do not create or access a Berkeley DB repository on a network share.
			It <emphasis>cannot</emphasis> exist on a remote file system.
			Not even if you have the network drive mapped to a drive letter.
			If you attempt to use Berkeley DB on a network share,
			the results are unpredictable - you may see mysterious errors
			right away, or it may be months before you discover that your
			repository database is subtly corrupted.
		</para>
	</warning>
	<sect2 id="tsvn-repository-local-share">
		<title>Accessing a Repository on a Network Share</title>
		<indexterm>
			<primary>Network share</primary>
		</indexterm>
		<para>
			Although in theory it is possible to put a FSFS repository on a network
			share and have multiple users access it using <literal>file:///</literal>
			protocol, this is most definitely <emphasis>not</emphasis>
			recommended. In fact we would <emphasis>strongly</emphasis>
			discourage it, and do not support such use.
		</para>
		<para>
			Firstly you are giving every user direct write access to the
			repository, so any user could accidentally delete the entire repository
			or make it unusable in some other way.
		</para>
		<para>
			Secondly not all network file sharing protocols support the locking
			that Subversion requires, so you may find your repository gets corrupted.
			It may not happen straight away, but one day two users will try to access
			the repository at the same time.
		</para>
		<para>
			Thirdly the file permissions have to be set just so. You may just about
			get away with it on a native Windows share, but SAMBA is particularly
			difficult.
		</para>
		<para>
			<literal>file:///</literal> access is intended for local, single-user
			access only, particularly testing and debugging. When you want to share
			the repository you <emphasis>really</emphasis> need to set up a proper server,
			and it is not nearly as difficult as you might think.
			Read <xref linkend="tsvn-serversetup"/> for guidelines on choosing and
			setting up a server.
		</para>
	</sect2>
</sect1>
